"use strict";(self.webpackChunktracker=self.webpackChunktracker||[]).push([[76],{927:(t,e,n)=>{n.d(e,{Q:()=>d});var r=n(868),a=n(509);function i(t,e){var n=t.ctx,r=t.chartArea;if(r){var a=r.top,i=r.bottom,o=r.left,l=(r.right+o)/2,c=(a+i)/2,s=Math.min(r.width,r.height)/2*.85;e.forEach((function(e,r){if(t.getDatasetMeta(0).data[r]){var a=t.getDatasetMeta(0).data[r],i=Math.PI/1.95,o=(a.startAngle+a.endAngle)/2-Math.PI/2+i;!function(t,e,n,r){var a=new Image;a.crossOrigin="anonymous",a.onload=function(){r.save(),r.beginPath(),r.arc(e,n,10,0,2*Math.PI),r.clip(),r.drawImage(a,e-10,n-10,20,20),r.restore()},a.onerror=function(){var t=new Image;t.src="assets/default-favicon.png",t.onload=function(){r.save(),r.beginPath(),r.arc(e,n,10,0,2*Math.PI),r.clip(),r.drawImage(t,e-10,n-10,20,20),r.restore()}},a.src=t}(e,l+Math.cos(o)*s,c+Math.sin(o)*s,n)}}))}}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function l(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(t){s=!0,a=t}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function h(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}var d=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.onOthersClick=n,this.donutChart=null,this.faviconUpdateInterval=null,this.otherDomains=[],this.totalTime=0,this.chartOptions={cutout:"70%",responsive:!0,animation:{duration:300},plugins:{legend:{display:!1},tooltip:{enabled:!0,callbacks:{label:function(t){var e=t.label,n=t.raw;return"".concat(e,": ").concat((0,a.f)(n))}}}},elements:{arc:{borderWidth:0}},maintainAspectRatio:!1}},(e=[{key:"createTimerPlugin",value:function(){var t=this;return{id:"timerPlugin",beforeDraw:function(e){var n=e.ctx,r=e.chartArea,i=r.top,o=r.bottom,l=r.left,c=(r.right+l)/2,s=(i+o)/2;n.save(),n.font="1rem Arial",n.textAlign="center",n.textBaseline="middle",n.fillStyle="#35918b",n.fillText("Total Time",c,s-10),n.font="1.5rem Arial",n.fillText((0,a.f)(t.totalTime),c,s+15),n.restore()}}}},{key:"update",value:function(t){var e=Object.entries(t).sort((function(t,e){var n=c(t,2)[1];return c(e,2)[1][1]-n[1]}));this.totalTime=e.reduce((function(t,e){var n=c(e,2);return t+c(n[1],2)[1]}),0);var n=e.slice(0,4);this.otherDomains=e.slice(4);var r=this.otherDomains.reduce((function(t,e){var n=c(e,2);return t+c(n[1],2)[1]}),0),a=[].concat(l(n.map((function(t){return c(t,1)[0]}))),["Others"]),i=[].concat(l(n.map((function(t){var e=c(t,2);return c(e[1],2)[1]}))),[r]),o=l(n.map((function(t){var e=c(t,2);return c(e[1],1)[0]||"assets/default-favicon.png"})));o.length>=4&&o.push("assets/others-favicon.png"),this.donutChart?this.updateChart(a,i,o):this.createChart(a,i,["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEEAD"],5,o),this.updateFavicons(o)}},{key:"createChart",value:function(t,e,n,a,i){this.container.innerHTML="";var o=document.createElement("canvas");o.id="donut-chart",this.container.appendChild(o),this.donutChart=new r.t1(o.getContext("2d"),{type:"doughnut",data:{labels:t,datasets:[{data:e,backgroundColor:n.slice(0,a)}]},options:this.chartOptions,plugins:[this.createTimerPlugin()]}),this.donutChart.faviconData=i,this.setupEventListeners(o)}},{key:"setupEventListeners",value:function(t){var e=this,n=!1;t.addEventListener("mousemove",(function(r){var a=e.donutChart.getElementsAtEventForMode(r,"nearest",{intersect:!0},!0);if(a.length){var i=a[0];"Others"===e.donutChart.data.labels[i.index]?n||(t.style.cursor="pointer",n=!0):n&&(t.style.cursor="default",n=!1)}else n&&(t.style.cursor="default",n=!1)})),t.addEventListener("click",(function(t){var n=e.donutChart.getElementsAtEventForMode(t,"nearest",{intersect:!0},!0);if(n.length){var r=n[0];"Others"===e.donutChart.data.labels[r.index]&&e.onOthersClick&&e.onOthersClick(e.otherDomains)}}))}},{key:"updateChart",value:function(t,e,n){this.donutChart.data.labels=t,this.donutChart.data.datasets[0].data=e,this.donutChart.faviconData=n,this.donutChart.update("none")}},{key:"updateFavicons",value:function(t){var e,n=this;this.faviconUpdateInterval&&clearInterval(this.faviconUpdateInterval),null!==(e=this.donutChart)&&void 0!==e&&e.ctx&&(i(this.donutChart,t),this.faviconUpdateInterval=setInterval((function(){var e;null!==(e=n.donutChart)&&void 0!==e&&e.ctx&&i(n.donutChart,t)}),200))}},{key:"destroy",value:function(){this.faviconUpdateInterval&&clearInterval(this.faviconUpdateInterval),this.donutChart&&(this.donutChart.destroy(),this.donutChart=null)}}])&&f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}()},870:(t,e,n)=>{n.d(e,{u:()=>s});var r=n(509);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(t){s=!0,a=t}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}var s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.scrollContainer=null,this.listContainer=null,this.initialized=!1,this.initialize()},(e=[{key:"initialize",value:function(){this.container.innerHTML="",this.scrollContainer=document.createElement("div"),this.scrollContainer.className="list-scroll-container",this.listContainer=document.createElement("div"),this.listContainer.className="domain-list-container",this.scrollContainer.appendChild(this.listContainer),this.container.appendChild(this.scrollContainer),this.initialized=!0}},{key:"update",value:function(t){this.initialized||this.initialize();var e=Object.entries(t).sort((function(t,e){var n=i(t,2)[1];return i(e,2)[1][1]-n[1]}));0!==e.length?this.renderList(e):this.showEmptyState()}},{key:"showEmptyState",value:function(){this.listContainer&&(this.listContainer.innerHTML='\n                <div class="no-data">No tracking data available</div>\n            ')}},{key:"createDomainLink",value:function(t){var e=document.createElement("a");return e.href="https://".concat(t),e.className="domain-name",e.textContent=t,e.target="_blank",e.rel="noopener noreferrer",e}},{key:"renderList",value:function(t){var e=this;if(this.listContainer){this.listContainer.innerHTML="";var n=document.createDocumentFragment();t.forEach((function(t){var a=i(t,2),o=a[0],l=i(a[1],2),c=l[0],s=l[1],u=document.createElement("div");u.className="domain-entry";var f=document.createElement("div");f.className="favicon-container";var h=document.createElement("img");h.src=c||"assets/default-favicon.png",h.alt="Favicon",h.className="favicon-image",h.onerror=function(){h.src="assets/default-favicon.png"},f.appendChild(h),u.appendChild(f);var d=e.createDomainLink(o);u.appendChild(d);var v=document.createElement("span");v.className="domain-time",v.textContent=(0,r.f)(s),u.appendChild(v),n.appendChild(u)})),this.listContainer.appendChild(n)}}},{key:"destroy",value:function(){this.container&&(this.container.innerHTML=""),this.scrollContainer=null,this.listContainer=null,this.initialized=!1}}])&&l(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}()},509:(t,e,n)=>{function r(t){if(t<60)return"".concat(t,"s");if(t<3600){var e=Math.floor(t/60),n=t%60;return"".concat(e,"m ").concat(n,"s")}var r=Math.floor(t/3600),a=Math.floor(t%3600/60);return"".concat(r,"h ").concat(a,"m")}n.d(e,{f:()=>r})}}]);